<！doctype 超文本标记语言>
<超文本标记语言<html 朗="zh-CN">朗="zh-CN">
<头>
<元 字符集="UTF-8"><元 字符集="UTF-8">
<元名称=“视口”内容=“宽度=设备宽度，初始比例=1.0”><元 姓名="视口" 内容="宽度=设备宽度，初始比例=1.0">
<标题>资料加载中</标题><标题>资料加载中</标题>
<风格><风格>
* {
页边距：0；
填充：0；
框大小：边框框；
字体系列：苹果系统、BlinkMacSystemFont、“Pingfang SC”、“Helvetica Neue”、STHeiti、“微软雅黑”、无衬线；
        }
正文{
背景：线性梯度(135度，#6a11cb 0%，#2575fc100%)；
最低高度：100vh；
显示：柔性；
弯曲方向：立柱；
对齐项：居中；
对齐-内容：居中；
填料：20px；
颜色：白色；
        }
.容器{
背景：rgba(255，255，255，0.15)；
背景滤镜：模糊(10 PX)；
边界半径：20px；
填充：30px；
宽度：100%；
最大宽度：500px；
文本对齐：居中；
箱阴影：010px30px RGBA(0，0，0，0.2)；
边框：1px实体rgba(255，255，255，0.2)；
        }
.标志{
宽度：100px；
            height: 100px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 20px;
        }
        .logo img {
            width: 60px;
            height: 60px;
        }
        h1 {
            font-size: 24px;
            margin-bottom: 15px;
            font-weight: 600;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }
        .loading-container {
            margin: 30px 0;
        }
        .loading-bar {
            height: 8px;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 4px;
            overflow: hidden;
            margin: 20px 0;
        }
        .loading-progress {
            height: 100%;
            width: 0;
            background: #fff;
            border-radius: 4px;
            animation: loading 2s ease-in-out forwards;
        }
        @keyframes loading {
            0% { width: 0; }
            70% { width: 85%; }
            100% { width: 100%; }
        }
        .guide-section {
            display: none;
            margin-top: 30px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 15px;
        }
        .guide-section h2 {
            font-size: 20px;
            margin-bottom: 15px;
        }
        .guide-steps {
            text-align: left;
            margin: 20px 0;
        }
        .step {
            display: flex;
            margin-bottom: 15px;
            align-items: flex-start;
        }
        .step-number {
            background: #fff;
            color: #2575fc;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            flex-shrink: 0;
            margin-right: 15px;
        }
        .step-content {
            flex: 1;
        }
        .btn {
            display: inline-block;
            background: #07C160;
            color: white;
            padding: 14px 35px;
            border-radius: 50px;
            font-weight: 600;
            font-size: 18px;
            text-decoration: none;
            margin: 15px 0;
            border: none;
            cursor: pointer;
            box-shadow: 0 4px 10px rgba(7, 193, 96, 0.3);
            transition: all 0.3s ease;
        }
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(7, 193, 96, 0.4);
        }
        .btn:active {
            transform: translateY(0);
        }
        .qrcode-container {
            margin: 25px 0;
            padding: 15px;
            background: white;
            border-radius: 15px;
            display: inline-block;
        }
        .qrcode-container p {
            color: #333;
            margin-top: 10px;
            font-weight: 500;
        }
        .tip {
            font-size: 14px;
            margin-top: 20px;
            opacity: 0.8;
        }
        .footer {
            margin-top: 30px;
            font-size: 12px;
            opacity: 0.7;
        }
        @media (max-width: 480px) {
            .container {
                padding: 20px;
            }
            h1 {
                font-size: 20px;
            }
            .btn {
                padding: 12px 30px;
                font-size: 16px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="logo">
        <svg viewBox="0 0 24 24" fill="white" width="60px" height="60px">
                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"></path>
            </svg>
        </div>
        <h1>正在为您加载企业资料</h1>
        <p>请稍候，正在准备您的专属内容...</p>
        <div class="loading-container">
            <div class="loading-bar">
                <div class="loading-progress"></div>
            </div>
            <p>正在连接企业资源库</p>
        </div>
        <div id="guideSection" class="guide-section">
            <h2>跳转指引</h2>
            <div class="guide-steps">
                <div class="step">
                    <div class="step-number">1</div>
                    <div class="step-content">点击右上角 <strong>"•••"</strong> 按钮</div>
                </div>
                <div class="step">
                    <div class="step-number">2</div>
                    <div class="step-content">选择 <strong>"在浏览器打开"</strong></div>
                </div>
                <div class="step">
                    <div class="step-number">3</div>
                    <div class="step-content">在浏览器中点击下方按钮继续</div>
                </div>
            </div>
            <button id="jumpBtn" class="btn">查看企业资料</button>
            <div class="qrcode-container">
                <div id="qrcode"></div>
                <p>扫码直接添加企业微信</p>
            </div>
        </div>
        <p class="tip">安全提示：该链接仅用于资料查看，请勿泄露给他人</p>
    </div>
    <div class="footer">
        企业资源中心 © 2023
    </div>
    <script src="https://cdn.jsdelivr.net/gh/davidshimjs/qrcodejs@gh-pages/qrcode.min.js"></script>
    <script>
        // 解析URL参数
        function getQueryParam(name) {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get(name);
        }
        // 生成微信小程序跳转链接
        function generateWeixinScheme(docId) {
            // 实际使用中替换为你的微信小程序Ticket
            const ticket = "TICKET_ID";
            return `weixin://dl/business/?t=${ticket}&path=pages%2Fview%2Fview%3Fdocid%3D${docId}`;
        }
        // 主要跳转逻辑
        function initRedirect() {
            // 获取文档ID（这里使用示例ID，实际应从URL参数获取）
            const docId = getQueryParam('docid') || "ABC123456";
            // 生成跳转链接
            const scheme = generateWeixinScheme(docId);
            // 设置跳转按钮
            document.getElementById('jumpBtn').onclick = function() {
                window.location.href = scheme;
            };
            // 尝试自动跳转
            try {
                window.location.href = scheme;
            } catch (e) {
                console.error("自动跳转失败:", e);
            }
            // 检测是否在抖音环境中
            const isDouyin = /aweme/i.test(navigator.userAgent);
            // 如果在抖音中，显示手动引导
            if (isDouyin) {
                // 显示引导内容
                setTimeout(() => {
                    document.getElementById('guideSection').style.display = 'block';
                }, 3000);
            }
            // 生成二维码（企业微信二维码）
            new QRCode(document.getElementById("qrcode"), {
                text: "https://work.weixin.qq.com/your-qrcode-link", // 替换为实际二维码链接
                width: 150,
                height: 150,
                colorDark: "#000000",
                colorLight: "#ffffff",
                correctLevel: QRCode.CorrectLevel.H
            });
        }
        // 页面加载完成后初始化
        window.addEventListener('DOMContentLoaded', initRedirect);
    </script>
</body>
</html>

